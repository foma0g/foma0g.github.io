<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Tic Tac Toe</title>
    <style>
        body {
            font-family: 'Open Sans', sans-serif;
            background-color: #f7f7f7;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .board {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            grid-template-rows: repeat(3, 1fr);
            gap: 10px;
            max-width: 300px;
        }

        .cell {
            background-color: #fff;
            border: 1px solid #ccc;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 2rem;
            font-weight: bold;
            color: #555;
            cursor: pointer;
        }

        .cell:hover {
            background-color: #eee;
        }

        .cell:active {
            background-color: #ddd;
        }

        .reset-button, .switch-button {
            font-size: 1rem;
            font-weight: bold;
            background-color: #4CAF50;
            color: #fff;
            border: none;
            padding: 10px;
            margin: 10px;
            border-radius: 5px;
            cursor: pointer;
        }

        .reset-button:hover, .switch-button:hover {
            background-color: #3e8e41;
        }

        .reset-button:active, .switch-button:active {
            background-color: #287d3c;
        }

        .winner-message, .looser-message {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: rgba(0, 0, 0, 0.5);
            color: #fff;
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            display: none;
        }
    </style>
</head>
<body>
    <div class="board">
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
        <div class="cell"></div>
    </div>

    <button class="reset-button">Reset</button>
    <button class="switch-button">Switch</button>

    <div class="winner-message">You win!</div>
    <div class="looser-message">You loose!</div>

    <script>
        const humanPlayer = 'X';
        const botPlayer = 'O';
        let currentPlayer = humanPlayer;
        let board = ['', '', '', '', '', '', '', '', ''];
        const cells = document.querySelectorAll('.cell');
        const resetButton = document.querySelector('.reset-button');
        const switchButton = document.querySelector('.switch-button');
        const winnerMessage = document.querySelector('.winner-message');
        const looserMessage = document.querySelector('.looser-message');

        function makeMove(index, player) {
board[index] = player;

const cell = document.querySelector(.cell[data-index="${index}"]);
cell.textContent = player;
cell.classList.add(player === humanPlayer ? 'human' : 'bot');

const winner = checkWinner(board);
if (winner !== null) {
if (winner === humanPlayer) {
showModal('win');
} else if (winner === botPlayer) {
showModal('lose');
}
return;
}

if (player === humanPlayer) {
const cells = document.querySelectorAll('.cell');
cells.forEach(cell => cell.classList.remove('hover'));
if (!isGameOver()) {
makeMove(alphaBetaPruning(), botPlayer);
}
}
}

function resetBoard() {
board = Array(9).fill(null);
const cells = document.querySelectorAll('.cell');
cells.forEach(cell => {
cell.textContent = '';
cell.classList.remove('human', 'bot');
cell.classList.add('hover');
});

const switchButton = document.querySelector('.switch-button');
switchButton.classList.remove('disabled');
currentPlayer = humanPlayer;
}

function switchFirstPlayer() {
const switchButton = document.querySelector('.switch-button');
switchButton.classList.add('disabled');
currentPlayer = botPlayer;
makeMove(alphaBetaPruning(), botPlayer);
}

function showModal(result) {
const modal = document.querySelector('.modal');
const message = document.querySelector('.message');
message.textContent = result === 'win' ? 'You Win!' : 'You Lose :(';
modal.style.display = 'block';
}

function closeModal() {
const modal = document.querySelector('.modal');
modal.style.display = 'none';
}

function isGameOver() {
return checkWinner(board) !== null || board.every(cell => cell !== null);
}

function checkWinner(board) {
const winPositions = [
// horizontal
[0, 1, 2],
[3, 4, 5],
[6, 7, 8],
// vertical
[0, 3, 6],
[1, 4, 7],
[2, 5, 8],
// diagonal
[0, 4, 8],
[2, 4, 6]
];

for (const [a, b, c] of winPositions) {
if (board[a] !== null && board[a] === board[b] && board[b] === board[c]) {
return board[a];
}
}

return null;
}

const cells = document.querySelectorAll('.cell');
cells.forEach((cell, index) => {
cell.addEventListener('click', () => {
if (board[index] === null && currentPlayer === humanPlayer && !isGameOver()) {
makeMove(index, humanPlayer);
}
});
});

const resetButton = document.querySelector('.reset-button');
resetButton.addEventListener('click', () => {
closeModal();
resetBoard();
});

const switchButton = document.querySelector('.switch-button');
switchButton.addEventListener('click', () => {
closeModal();
switchFirstPlayer();
}); 